/* Game.c generated by valac 0.34.7, the Vala compiler
 * generated from Game.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <SDL2/SDL_events.h>
#include <SDL2/SDL_render.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_timer.h>
#include <SDL2/SDL_pixels.h>
#include <SDL2/SDL_surface.h>
#include <SDL2/SDL_rect.h>

typedef struct _Game Game;
typedef struct _entitasWorld entitasWorld;
typedef entitasWorld Factory;

#define ENTITAS_TYPE_ENTITY (entitas_entity_get_type ())

#define ENTITAS_TYPE_BACKGROUND (entitas_background_get_type ())
typedef struct _entitasBackground entitasBackground;

#define ENTITAS_TYPE_BOUNDS (entitas_bounds_get_type ())
typedef struct _entitasBounds entitasBounds;

#define ENTITAS_TYPE_BULLET (entitas_bullet_get_type ())
typedef struct _entitasBullet entitasBullet;

#define ENTITAS_TYPE_ENEMY1 (entitas_enemy1_get_type ())
typedef struct _entitasEnemy1 entitasEnemy1;

#define ENTITAS_TYPE_ENEMY2 (entitas_enemy2_get_type ())
typedef struct _entitasEnemy2 entitasEnemy2;

#define ENTITAS_TYPE_ENEMY3 (entitas_enemy3_get_type ())
typedef struct _entitasEnemy3 entitasEnemy3;

#define ENTITAS_TYPE_EXPIRES (entitas_expires_get_type ())
typedef struct _entitasExpires entitasExpires;

#define ENTITAS_TYPE_HEALTH (entitas_health_get_type ())
typedef struct _entitasHealth entitasHealth;

#define ENTITAS_TYPE_HUD (entitas_hud_get_type ())
typedef struct _entitasHud entitasHud;

#define ENTITAS_TYPE_INDEX (entitas_index_get_type ())
typedef struct _entitasIndex entitasIndex;

#define ENTITAS_TYPE_LAYER (entitas_layer_get_type ())
typedef struct _entitasLayer entitasLayer;

#define ENTITAS_TYPE_POSITION (entitas_position_get_type ())
typedef struct _entitasPosition entitasPosition;

#define ENTITAS_TYPE_SCALE (entitas_scale_get_type ())
typedef struct _entitasScale entitasScale;

#define ENTITAS_TYPE_SPRITE (entitas_sprite_get_type ())
typedef struct _sdxSprite sdxSprite;
typedef struct _entitasSprite entitasSprite;

#define ENTITAS_TYPE_TEXT (entitas_text_get_type ())
typedef struct _entitasText entitasText;

#define ENTITAS_TYPE_TINT (entitas_tint_get_type ())
typedef struct _entitasTint entitasTint;

#define ENTITAS_TYPE_TWEEN (entitas_tween_get_type ())
typedef struct _entitasTween entitasTween;

#define ENTITAS_TYPE_VELOCITY (entitas_velocity_get_type ())
typedef struct _entitasVelocity entitasVelocity;
typedef struct _entitasEntity entitasEntity;
typedef struct _sdxFont sdxFont;
typedef struct _systemsCollision systemsCollision;
typedef struct _systemsExpire systemsExpire;
typedef struct _systemsInput systemsInput;
typedef struct _systemsPhysics systemsPhysics;
typedef struct _systemsRemove systemsRemove;
typedef struct _systemsSpawn systemsSpawn;
typedef struct _systemsAnimation systemsAnimation;
void entitas_world_release (entitasWorld* self);
void entitas_world_free (entitasWorld* self);
entitasWorld* entitas_world_addRef (entitasWorld* self);
#define _entitas_world_release0(var) ((var == NULL) ? NULL : (var = (entitas_world_release (var), NULL)))
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))
void sdx_font_release (sdxFont* self);
void sdx_font_free (sdxFont* self);
sdxFont* sdx_font_addRef (sdxFont* self);
#define _sdx_font_release0(var) ((var == NULL) ? NULL : (var = (sdx_font_release (var), NULL)))
void sdx_sprite_release (sdxSprite* self);
void sdx_sprite_free (sdxSprite* self);
sdxSprite* sdx_sprite_addRef (sdxSprite* self);
#define _sdx_sprite_release0(var) ((var == NULL) ? NULL : (var = (sdx_sprite_release (var), NULL)))
void systems_collision_release (systemsCollision* self);
void systems_collision_free (systemsCollision* self);
systemsCollision* systems_collision_addRef (systemsCollision* self);
#define _systems_collision_release0(var) ((var == NULL) ? NULL : (var = (systems_collision_release (var), NULL)))
void systems_expire_release (systemsExpire* self);
void systems_expire_free (systemsExpire* self);
systemsExpire* systems_expire_addRef (systemsExpire* self);
#define _systems_expire_release0(var) ((var == NULL) ? NULL : (var = (systems_expire_release (var), NULL)))
void systems_input_release (systemsInput* self);
void systems_input_free (systemsInput* self);
systemsInput* systems_input_addRef (systemsInput* self);
#define _systems_input_release0(var) ((var == NULL) ? NULL : (var = (systems_input_release (var), NULL)))
void systems_physics_release (systemsPhysics* self);
void systems_physics_free (systemsPhysics* self);
systemsPhysics* systems_physics_addRef (systemsPhysics* self);
#define _systems_physics_release0(var) ((var == NULL) ? NULL : (var = (systems_physics_release (var), NULL)))
void systems_remove_release (systemsRemove* self);
void systems_remove_free (systemsRemove* self);
systemsRemove* systems_remove_addRef (systemsRemove* self);
#define _systems_remove_release0(var) ((var == NULL) ? NULL : (var = (systems_remove_release (var), NULL)))
void systems_spawn_release (systemsSpawn* self);
void systems_spawn_free (systemsSpawn* self);
systemsSpawn* systems_spawn_addRef (systemsSpawn* self);
#define _systems_spawn_release0(var) ((var == NULL) ? NULL : (var = (systems_spawn_release (var), NULL)))
void systems_animation_release (systemsAnimation* self);
void systems_animation_free (systemsAnimation* self);
systemsAnimation* systems_animation_addRef (systemsAnimation* self);
#define _systems_animation_release0(var) ((var == NULL) ? NULL : (var = (systems_animation_release (var), NULL)))
void game_release (Game* self);
void game_free (Game* self);
Game* game_addRef (Game* self);
#define _game_release0(var) ((var == NULL) ? NULL : (var = (game_release (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define SDX_TYPE_SCALE (sdx_scale_get_type ())
typedef struct _sdxScale sdxScale;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _entitasBackground {
	gboolean active;
};

struct _entitasBounds {
	gint x;
	gint y;
	gint w;
	gint h;
};

struct _entitasBullet {
	gboolean active;
};

struct _entitasEnemy1 {
	gboolean active;
};

struct _entitasEnemy2 {
	gboolean active;
};

struct _entitasEnemy3 {
	gboolean active;
};

struct _entitasExpires {
	gdouble value;
};

struct _entitasHealth {
	gdouble current;
	gdouble maximum;
};

struct _entitasHud {
	gboolean active;
};

struct _entitasIndex {
	gint value;
	gint limit;
	gboolean vertical;
};

struct _entitasLayer {
	gint value;
};

struct _entitasPosition {
	gdouble x;
	gdouble y;
};

struct _entitasScale {
	gdouble x;
	gdouble y;
};

struct _entitasSprite {
	sdxSprite* sprite;
	gint width;
	gint height;
};

struct _entitasText {
	gchar* text;
	sdxSprite* sprite;
};

struct _entitasTint {
	gint r;
	gint g;
	gint b;
	gint a;
};

struct _entitasTween {
	gdouble min;
	gdouble max;
	gdouble speed;
	gboolean repeat;
	gboolean active;
};

struct _entitasVelocity {
	gdouble x;
	gdouble y;
};

struct _entitasEntity {
	gint id;
	gchar* name;
	gint pool;
	guint64 mask;
	entitasBackground* background;
	entitasBounds* bounds;
	entitasBullet* bullet;
	entitasEnemy1* enemy1;
	entitasEnemy2* enemy2;
	entitasEnemy3* enemy3;
	entitasExpires* expires;
	entitasHealth* health;
	entitasHud* hud;
	entitasIndex* index;
	entitasLayer* layer;
	entitasPosition* position;
	entitasScale* scale;
	entitasSprite* sprite;
	entitasText* text;
	entitasTint* tint;
	entitasTween* tween;
	entitasVelocity* velocity;
};

struct _Game {
	gint refCount;
	gint width;
	gint height;
	gdouble mark1;
	gdouble mark2;
	gdouble delta;
	gdouble mouseX;
	gdouble mouseY;
	gboolean mouseDown;
	gboolean running;
	guint8 keys[256];
	SDL_Event evt;
	SDL_Renderer* renderer;
	Factory* world;
	GList* sprites;
	sdxFont* font;
	sdxSprite* fpsSprite;
	gdouble fps;
	gdouble elapsed;
	gint frames;
	systemsCollision* collision;
	systemsExpire* expire;
	systemsInput* input;
	systemsPhysics* physics;
	systemsRemove* remove;
	systemsSpawn* spawn;
	systemsAnimation* animate;
	gdouble freq;
	entitasEntity* player;
};

typedef void (*entitasEntityRemovedListener) (entitasEntity* e, void* user_data);
typedef void (*entitasSystemInitialize) (void* user_data);
typedef void (*entitasSystemExecute) (gdouble delta, void* user_data);
struct _sdxScale {
	gdouble x;
	gdouble y;
};

struct _sdxSprite {
	gint refCount;
	SDL_Texture* texture;
	SDL_Surface* surface;
	gint width;
	gint height;
	gint x;
	gint y;
	sdxScale scale;
	SDL_Color color;
	gboolean centered;
	gint layer;
	gint id;
	gchar* path;
	gboolean isText;
};


extern Game* game_instance;
Game* game_instance = NULL;

void game_free (Game* self);
void entitas_world_free (entitasWorld* self);
GType entitas_entity_get_type (void) G_GNUC_CONST;
GType entitas_background_get_type (void) G_GNUC_CONST;
entitasBackground* entitas_background_dup (const entitasBackground* self);
void entitas_background_free (entitasBackground* self);
GType entitas_bounds_get_type (void) G_GNUC_CONST;
entitasBounds* entitas_bounds_dup (const entitasBounds* self);
void entitas_bounds_free (entitasBounds* self);
GType entitas_bullet_get_type (void) G_GNUC_CONST;
entitasBullet* entitas_bullet_dup (const entitasBullet* self);
void entitas_bullet_free (entitasBullet* self);
GType entitas_enemy1_get_type (void) G_GNUC_CONST;
entitasEnemy1* entitas_enemy1_dup (const entitasEnemy1* self);
void entitas_enemy1_free (entitasEnemy1* self);
GType entitas_enemy2_get_type (void) G_GNUC_CONST;
entitasEnemy2* entitas_enemy2_dup (const entitasEnemy2* self);
void entitas_enemy2_free (entitasEnemy2* self);
GType entitas_enemy3_get_type (void) G_GNUC_CONST;
entitasEnemy3* entitas_enemy3_dup (const entitasEnemy3* self);
void entitas_enemy3_free (entitasEnemy3* self);
GType entitas_expires_get_type (void) G_GNUC_CONST;
entitasExpires* entitas_expires_dup (const entitasExpires* self);
void entitas_expires_free (entitasExpires* self);
GType entitas_health_get_type (void) G_GNUC_CONST;
entitasHealth* entitas_health_dup (const entitasHealth* self);
void entitas_health_free (entitasHealth* self);
GType entitas_hud_get_type (void) G_GNUC_CONST;
entitasHud* entitas_hud_dup (const entitasHud* self);
void entitas_hud_free (entitasHud* self);
GType entitas_index_get_type (void) G_GNUC_CONST;
entitasIndex* entitas_index_dup (const entitasIndex* self);
void entitas_index_free (entitasIndex* self);
GType entitas_layer_get_type (void) G_GNUC_CONST;
entitasLayer* entitas_layer_dup (const entitasLayer* self);
void entitas_layer_free (entitasLayer* self);
GType entitas_position_get_type (void) G_GNUC_CONST;
entitasPosition* entitas_position_dup (const entitasPosition* self);
void entitas_position_free (entitasPosition* self);
GType entitas_scale_get_type (void) G_GNUC_CONST;
entitasScale* entitas_scale_dup (const entitasScale* self);
void entitas_scale_free (entitasScale* self);
GType entitas_sprite_get_type (void) G_GNUC_CONST;
void sdx_sprite_free (sdxSprite* self);
entitasSprite* entitas_sprite_dup (const entitasSprite* self);
void entitas_sprite_free (entitasSprite* self);
void entitas_sprite_copy (const entitasSprite* self, entitasSprite* dest);
void entitas_sprite_destroy (entitasSprite* self);
GType entitas_text_get_type (void) G_GNUC_CONST;
entitasText* entitas_text_dup (const entitasText* self);
void entitas_text_free (entitasText* self);
void entitas_text_copy (const entitasText* self, entitasText* dest);
void entitas_text_destroy (entitasText* self);
GType entitas_tint_get_type (void) G_GNUC_CONST;
entitasTint* entitas_tint_dup (const entitasTint* self);
void entitas_tint_free (entitasTint* self);
GType entitas_tween_get_type (void) G_GNUC_CONST;
entitasTween* entitas_tween_dup (const entitasTween* self);
void entitas_tween_free (entitasTween* self);
GType entitas_velocity_get_type (void) G_GNUC_CONST;
entitasVelocity* entitas_velocity_dup (const entitasVelocity* self);
void entitas_velocity_free (entitasVelocity* self);
entitasEntity* entitas_entity_dup (const entitasEntity* self);
void entitas_entity_free (entitasEntity* self);
void entitas_entity_copy (const entitasEntity* self, entitasEntity* dest);
void entitas_entity_destroy (entitasEntity* self);
void sdx_font_free (sdxFont* self);
void systems_collision_free (systemsCollision* self);
void systems_expire_free (systemsExpire* self);
void systems_input_free (systemsInput* self);
void systems_physics_free (systemsPhysics* self);
void systems_remove_free (systemsRemove* self);
void systems_spawn_free (systemsSpawn* self);
void systems_animation_free (systemsAnimation* self);
static void game_instance_init (Game * self);
Game* game_addRef (Game* self);
void game_release (Game* self);
void game_free (Game* self);
Game* game_new (gint width, gint height, SDL_Renderer* renderer);
void game_initialize (Game* self);
Factory* factory_new (void);
void entitas_world_setEntityRemovedListener (entitasWorld* self, entitasEntityRemovedListener removed, void* removed_target);
void entityRemoved (entitasEntity* e);
static void _entityRemoved_entitas_entity_removed_listener (entitasEntity* e, gpointer self);
entitasEntity* factory_createBackground (Factory* self, Game* game);
entitasEntity* factory_createPlayer (Factory* self, Game* game);
entitasEntity* factory_createBullet (Factory* self, Game* game);
entitasEntity* factory_createEnemy1 (Factory* self, Game* game);
entitasEntity* factory_createEnemy2 (Factory* self, Game* game);
entitasEntity* factory_createEnemy3 (Factory* self, Game* game);
entitasEntity* factory_createExplosion (Factory* self, Game* game);
entitasEntity* factory_createBang (Factory* self, Game* game);
entitasEntity* factory_createParticle (Factory* self, Game* game);
systemsSpawn* systems_spawn_new (Game* game, Factory* factory);
systemsInput* systems_input_new (Game* game, Factory* factory);
systemsCollision* systems_collision_new (Game* game, Factory* factory);
systemsPhysics* systems_physics_new (Game* game, Factory* factory);
systemsExpire* systems_expire_new (Game* game, Factory* factory);
systemsRemove* systems_remove_new (Game* game, Factory* factory);
systemsAnimation* systems_animation_new (Game* game, Factory* factory);
void entitas_world_addSystem (entitasWorld* self, entitasSystemInitialize initialize, void* initialize_target, entitasSystemExecute execute, void* execute_target);
void systems_spawn_initialize (systemsSpawn* self);
static void _systems_spawn_initialize_entitas_system_initialize (gpointer self);
void systems_spawn_execute (systemsSpawn* self, gdouble delta);
static void _systems_spawn_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_input_initialize (systemsInput* self);
static void _systems_input_initialize_entitas_system_initialize (gpointer self);
void systems_input_execute (systemsInput* self, gdouble delta);
static void _systems_input_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_collision_initialize (systemsCollision* self);
static void _systems_collision_initialize_entitas_system_initialize (gpointer self);
void systems_collision_execute (systemsCollision* self, gdouble delta);
static void _systems_collision_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_physics_initialize (systemsPhysics* self);
static void _systems_physics_initialize_entitas_system_initialize (gpointer self);
void systems_physics_execute (systemsPhysics* self, gdouble delta);
static void _systems_physics_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_animation_initialize (systemsAnimation* self);
static void _systems_animation_initialize_entitas_system_initialize (gpointer self);
void systems_animation_execute (systemsAnimation* self, gdouble delta);
static void _systems_animation_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_expire_initialize (systemsExpire* self);
static void _systems_expire_initialize_entitas_system_initialize (gpointer self);
void systems_expire_execute (systemsExpire* self, gdouble delta);
static void _systems_expire_execute_entitas_system_execute (gdouble delta, gpointer self);
void systems_remove_initialize (systemsRemove* self);
static void _systems_remove_initialize_entitas_system_initialize (gpointer self);
void systems_remove_execute (systemsRemove* self, gdouble delta);
static void _systems_remove_execute_entitas_system_execute (gdouble delta, gpointer self);
void entitas_world_initialize (entitasWorld* self);
sdxFont* sdx_font_new (const gchar* path, gint size);
void game_start (Game* self);
void game_processEvents (Game* self);
void game_update (Game* self);
void entitas_world_execute (entitasWorld* self, gdouble delta);
void game_draw (Game* self);
gboolean entitas_entity_isActive (entitasEntity *self);
gboolean game_drawEach (Game* self, entitasEntity* e);
void game_drawFps (Game* self);
sdxSprite* sdx_sprite_new (SDL_Renderer* renderer, const gchar* path, sdxFont* font, SDL_Color* color);
GType sdx_scale_get_type (void) G_GNUC_CONST;
sdxScale* sdx_scale_dup (const sdxScale* self);
void sdx_scale_free (sdxScale* self);
void sdx_sprite_render (sdxSprite* self, SDL_Renderer* renderer, gint x, gint y, SDL_Rect* clip);
gboolean entitas_entity_hasSprite (entitasEntity *self);
gboolean entitas_entity_isBackground (entitasEntity *self);
gboolean entitas_entity_hasTint (entitasEntity *self);
void entityAdded (entitasEntity* e);


Game* game_addRef (Game* self) {
	Game* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->refCount), 1);
	result = self;
	return result;
}


void game_release (Game* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->refCount));
	if (_tmp0_) {
		game_free (self);
	}
}


static gpointer _game_addRef0 (gpointer self) {
	return self ? game_addRef (self) : NULL;
}


Game* game_new (gint width, gint height, SDL_Renderer* renderer) {
	Game* self;
	Game* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	SDL_Renderer* _tmp3_ = NULL;
	g_return_val_if_fail (renderer != NULL, NULL);
	self = g_slice_new0 (Game);
	game_instance_init (self);
	_tmp0_ = _game_addRef0 (self);
	_game_release0 (game_instance);
	game_instance = _tmp0_;
	_tmp1_ = width;
	self->width = _tmp1_;
	_tmp2_ = height;
	self->height = _tmp2_;
	_tmp3_ = renderer;
	self->renderer = _tmp3_;
	return self;
}


static void _entityRemoved_entitas_entity_removed_listener (entitasEntity* e, gpointer self) {
	entityRemoved (e);
}


static void _systems_spawn_initialize_entitas_system_initialize (gpointer self) {
	systems_spawn_initialize ((systemsSpawn*) self);
}


static void _systems_spawn_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_spawn_execute ((systemsSpawn*) self, delta);
}


static void _systems_input_initialize_entitas_system_initialize (gpointer self) {
	systems_input_initialize ((systemsInput*) self);
}


static void _systems_input_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_input_execute ((systemsInput*) self, delta);
}


static void _systems_collision_initialize_entitas_system_initialize (gpointer self) {
	systems_collision_initialize ((systemsCollision*) self);
}


static void _systems_collision_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_collision_execute ((systemsCollision*) self, delta);
}


static void _systems_physics_initialize_entitas_system_initialize (gpointer self) {
	systems_physics_initialize ((systemsPhysics*) self);
}


static void _systems_physics_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_physics_execute ((systemsPhysics*) self, delta);
}


static void _systems_animation_initialize_entitas_system_initialize (gpointer self) {
	systems_animation_initialize ((systemsAnimation*) self);
}


static void _systems_animation_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_animation_execute ((systemsAnimation*) self, delta);
}


static void _systems_expire_initialize_entitas_system_initialize (gpointer self) {
	systems_expire_initialize ((systemsExpire*) self);
}


static void _systems_expire_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_expire_execute ((systemsExpire*) self, delta);
}


static void _systems_remove_initialize_entitas_system_initialize (gpointer self) {
	systems_remove_initialize ((systemsRemove*) self);
}


static void _systems_remove_execute_entitas_system_execute (gdouble delta, gpointer self) {
	systems_remove_execute ((systemsRemove*) self, delta);
}


void game_initialize (Game* self) {
	Factory* _tmp0_ = NULL;
	Factory* _tmp1_ = NULL;
	Factory* _tmp2_ = NULL;
	Factory* _tmp3_ = NULL;
	entitasEntity* _tmp4_ = NULL;
	Factory* _tmp26_ = NULL;
	systemsSpawn* _tmp27_ = NULL;
	Factory* _tmp28_ = NULL;
	systemsInput* _tmp29_ = NULL;
	Factory* _tmp30_ = NULL;
	systemsCollision* _tmp31_ = NULL;
	Factory* _tmp32_ = NULL;
	systemsPhysics* _tmp33_ = NULL;
	Factory* _tmp34_ = NULL;
	systemsExpire* _tmp35_ = NULL;
	Factory* _tmp36_ = NULL;
	systemsRemove* _tmp37_ = NULL;
	Factory* _tmp38_ = NULL;
	systemsAnimation* _tmp39_ = NULL;
	Factory* _tmp40_ = NULL;
	systemsSpawn* _tmp41_ = NULL;
	systemsSpawn* _tmp42_ = NULL;
	Factory* _tmp43_ = NULL;
	systemsInput* _tmp44_ = NULL;
	systemsInput* _tmp45_ = NULL;
	Factory* _tmp46_ = NULL;
	systemsCollision* _tmp47_ = NULL;
	systemsCollision* _tmp48_ = NULL;
	Factory* _tmp49_ = NULL;
	systemsPhysics* _tmp50_ = NULL;
	systemsPhysics* _tmp51_ = NULL;
	Factory* _tmp52_ = NULL;
	systemsAnimation* _tmp53_ = NULL;
	systemsAnimation* _tmp54_ = NULL;
	Factory* _tmp55_ = NULL;
	systemsExpire* _tmp56_ = NULL;
	systemsExpire* _tmp57_ = NULL;
	Factory* _tmp58_ = NULL;
	systemsRemove* _tmp59_ = NULL;
	systemsRemove* _tmp60_ = NULL;
	Factory* _tmp61_ = NULL;
	sdxFont* _tmp62_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = factory_new ();
	_entitas_world_release0 (self->world);
	self->world = _tmp0_;
	_tmp1_ = self->world;
	entitas_world_setEntityRemovedListener ((entitasWorld*) _tmp1_, _entityRemoved_entitas_entity_removed_listener, NULL);
	_tmp2_ = self->world;
	factory_createBackground (_tmp2_, self);
	_tmp3_ = self->world;
	_tmp4_ = factory_createPlayer (_tmp3_, self);
	self->player = _tmp4_;
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp5_ = FALSE;
			_tmp5_ = TRUE;
			while (TRUE) {
				Factory* _tmp7_ = NULL;
				if (!_tmp5_) {
					gint _tmp6_ = 0;
					_tmp6_ = i;
					i = _tmp6_ + 1;
				}
				_tmp5_ = FALSE;
				if (!(i <= 20)) {
					break;
				}
				_tmp7_ = self->world;
				factory_createBullet (_tmp7_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp8_ = FALSE;
			_tmp8_ = TRUE;
			while (TRUE) {
				Factory* _tmp10_ = NULL;
				if (!_tmp8_) {
					gint _tmp9_ = 0;
					_tmp9_ = i;
					i = _tmp9_ + 1;
				}
				_tmp8_ = FALSE;
				if (!(i <= 15)) {
					break;
				}
				_tmp10_ = self->world;
				factory_createEnemy1 (_tmp10_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp11_ = FALSE;
			_tmp11_ = TRUE;
			while (TRUE) {
				Factory* _tmp13_ = NULL;
				if (!_tmp11_) {
					gint _tmp12_ = 0;
					_tmp12_ = i;
					i = _tmp12_ + 1;
				}
				_tmp11_ = FALSE;
				if (!(i <= 10)) {
					break;
				}
				_tmp13_ = self->world;
				factory_createEnemy2 (_tmp13_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp14_ = FALSE;
			_tmp14_ = TRUE;
			while (TRUE) {
				Factory* _tmp16_ = NULL;
				if (!_tmp14_) {
					gint _tmp15_ = 0;
					_tmp15_ = i;
					i = _tmp15_ + 1;
				}
				_tmp14_ = FALSE;
				if (!(i <= 5)) {
					break;
				}
				_tmp16_ = self->world;
				factory_createEnemy3 (_tmp16_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp17_ = FALSE;
			_tmp17_ = TRUE;
			while (TRUE) {
				Factory* _tmp19_ = NULL;
				if (!_tmp17_) {
					gint _tmp18_ = 0;
					_tmp18_ = i;
					i = _tmp18_ + 1;
				}
				_tmp17_ = FALSE;
				if (!(i <= 10)) {
					break;
				}
				_tmp19_ = self->world;
				factory_createExplosion (_tmp19_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp20_ = FALSE;
			_tmp20_ = TRUE;
			while (TRUE) {
				Factory* _tmp22_ = NULL;
				if (!_tmp20_) {
					gint _tmp21_ = 0;
					_tmp21_ = i;
					i = _tmp21_ + 1;
				}
				_tmp20_ = FALSE;
				if (!(i <= 12)) {
					break;
				}
				_tmp22_ = self->world;
				factory_createBang (_tmp22_, self);
			}
		}
	}
	{
		gint i = 0;
		i = 1;
		{
			gboolean _tmp23_ = FALSE;
			_tmp23_ = TRUE;
			while (TRUE) {
				Factory* _tmp25_ = NULL;
				if (!_tmp23_) {
					gint _tmp24_ = 0;
					_tmp24_ = i;
					i = _tmp24_ + 1;
				}
				_tmp23_ = FALSE;
				if (!(i <= 90)) {
					break;
				}
				_tmp25_ = self->world;
				factory_createParticle (_tmp25_, self);
			}
		}
	}
	_tmp26_ = self->world;
	_tmp27_ = systems_spawn_new (self, _tmp26_);
	_systems_spawn_release0 (self->spawn);
	self->spawn = _tmp27_;
	_tmp28_ = self->world;
	_tmp29_ = systems_input_new (self, _tmp28_);
	_systems_input_release0 (self->input);
	self->input = _tmp29_;
	_tmp30_ = self->world;
	_tmp31_ = systems_collision_new (self, _tmp30_);
	_systems_collision_release0 (self->collision);
	self->collision = _tmp31_;
	_tmp32_ = self->world;
	_tmp33_ = systems_physics_new (self, _tmp32_);
	_systems_physics_release0 (self->physics);
	self->physics = _tmp33_;
	_tmp34_ = self->world;
	_tmp35_ = systems_expire_new (self, _tmp34_);
	_systems_expire_release0 (self->expire);
	self->expire = _tmp35_;
	_tmp36_ = self->world;
	_tmp37_ = systems_remove_new (self, _tmp36_);
	_systems_remove_release0 (self->remove);
	self->remove = _tmp37_;
	_tmp38_ = self->world;
	_tmp39_ = systems_animation_new (self, _tmp38_);
	_systems_animation_release0 (self->animate);
	self->animate = _tmp39_;
	_tmp40_ = self->world;
	_tmp41_ = self->spawn;
	_tmp42_ = self->spawn;
	entitas_world_addSystem ((entitasWorld*) _tmp40_, _systems_spawn_initialize_entitas_system_initialize, _tmp41_, _systems_spawn_execute_entitas_system_execute, _tmp42_);
	_tmp43_ = self->world;
	_tmp44_ = self->input;
	_tmp45_ = self->input;
	entitas_world_addSystem ((entitasWorld*) _tmp43_, _systems_input_initialize_entitas_system_initialize, _tmp44_, _systems_input_execute_entitas_system_execute, _tmp45_);
	_tmp46_ = self->world;
	_tmp47_ = self->collision;
	_tmp48_ = self->collision;
	entitas_world_addSystem ((entitasWorld*) _tmp46_, _systems_collision_initialize_entitas_system_initialize, _tmp47_, _systems_collision_execute_entitas_system_execute, _tmp48_);
	_tmp49_ = self->world;
	_tmp50_ = self->physics;
	_tmp51_ = self->physics;
	entitas_world_addSystem ((entitasWorld*) _tmp49_, _systems_physics_initialize_entitas_system_initialize, _tmp50_, _systems_physics_execute_entitas_system_execute, _tmp51_);
	_tmp52_ = self->world;
	_tmp53_ = self->animate;
	_tmp54_ = self->animate;
	entitas_world_addSystem ((entitasWorld*) _tmp52_, _systems_animation_initialize_entitas_system_initialize, _tmp53_, _systems_animation_execute_entitas_system_execute, _tmp54_);
	_tmp55_ = self->world;
	_tmp56_ = self->expire;
	_tmp57_ = self->expire;
	entitas_world_addSystem ((entitasWorld*) _tmp55_, _systems_expire_initialize_entitas_system_initialize, _tmp56_, _systems_expire_execute_entitas_system_execute, _tmp57_);
	_tmp58_ = self->world;
	_tmp59_ = self->remove;
	_tmp60_ = self->remove;
	entitas_world_addSystem ((entitasWorld*) _tmp58_, _systems_remove_initialize_entitas_system_initialize, _tmp59_, _systems_remove_execute_entitas_system_execute, _tmp60_);
	_tmp61_ = self->world;
	entitas_world_initialize ((entitasWorld*) _tmp61_);
	_tmp62_ = sdx_font_new ("assets/fonts/OpenDyslexic-Bold.otf", 16);
	_sdx_font_release0 (self->font);
	self->font = _tmp62_;
}


void game_start (Game* self) {
	guint64 _tmp0_ = 0ULL;
	gdouble _tmp1_ = 0.0;
	g_return_if_fail (self != NULL);
	self->running = TRUE;
	_tmp0_ = SDL_GetPerformanceCounter ();
	_tmp1_ = self->freq;
	self->mark1 = ((gdouble) _tmp0_) / _tmp1_;
}


void game_processEvents (Game* self) {
	g_return_if_fail (self != NULL);
	while (TRUE) {
		SDL_Event _tmp0_ = {0};
		gint _tmp1_ = 0;
		SDL_Event _tmp2_ = {0};
		SDL_EventType _tmp3_ = 0;
		_tmp1_ = SDL_PollEvent (&_tmp0_);
		 (self->evt);
		self->evt = _tmp0_;
		if (!(_tmp1_ != 0)) {
			break;
		}
		_tmp2_ = self->evt;
		_tmp3_ = _tmp2_.type;
		switch (_tmp3_) {
			case SDL_QUIT:
			{
				{
					self->running = FALSE;
				}
				break;
			}
			case SDL_KEYDOWN:
			{
				{
					SDL_Event _tmp4_ = {0};
					SDL_KeyboardEvent _tmp5_ = {0};
					SDL_Keysym _tmp6_ = {0};
					SDL_Keycode _tmp7_ = 0;
					guint8 _tmp8_ = 0U;
					_tmp4_ = self->evt;
					_tmp5_ = _tmp4_.key;
					_tmp6_ = _tmp5_.keysym;
					_tmp7_ = _tmp6_.sym;
					self->keys[_tmp7_] = (guint8) 1;
					_tmp8_ = self->keys[_tmp7_];
				}
				break;
			}
			case SDL_KEYUP:
			{
				{
					SDL_Event _tmp9_ = {0};
					SDL_KeyboardEvent _tmp10_ = {0};
					SDL_Keysym _tmp11_ = {0};
					SDL_Keycode _tmp12_ = 0;
					guint8 _tmp13_ = 0U;
					_tmp9_ = self->evt;
					_tmp10_ = _tmp9_.key;
					_tmp11_ = _tmp10_.keysym;
					_tmp12_ = _tmp11_.sym;
					self->keys[_tmp12_] = (guint8) 0;
					_tmp13_ = self->keys[_tmp12_];
				}
				break;
			}
			case SDL_MOUSEMOTION:
			{
				{
					SDL_Event _tmp14_ = {0};
					SDL_MouseMotionEvent _tmp15_ = {0};
					gint32 _tmp16_ = 0;
					SDL_Event _tmp17_ = {0};
					SDL_MouseMotionEvent _tmp18_ = {0};
					gint32 _tmp19_ = 0;
					_tmp14_ = self->evt;
					_tmp15_ = _tmp14_.motion;
					_tmp16_ = _tmp15_.x;
					self->mouseX = (gdouble) _tmp16_;
					_tmp17_ = self->evt;
					_tmp18_ = _tmp17_.motion;
					_tmp19_ = _tmp18_.y;
					self->mouseY = (gdouble) _tmp19_;
				}
				break;
			}
			case SDL_MOUSEBUTTONDOWN:
			{
				{
					self->mouseDown = TRUE;
				}
				break;
			}
			case SDL_MOUSEBUTTONUP:
			{
				{
					self->mouseDown = FALSE;
				}
				break;
			}
			default:
			break;
		}
	}
}


void game_update (Game* self) {
	guint64 _tmp0_ = 0ULL;
	gdouble _tmp1_ = 0.0;
	gdouble _tmp2_ = 0.0;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	gint _tmp5_ = 0;
	gdouble _tmp6_ = 0.0;
	gdouble _tmp7_ = 0.0;
	gdouble _tmp8_ = 0.0;
	Factory* _tmp11_ = NULL;
	gdouble _tmp12_ = 0.0;
	g_return_if_fail (self != NULL);
	_tmp0_ = SDL_GetPerformanceCounter ();
	_tmp1_ = self->freq;
	self->mark2 = ((gdouble) _tmp0_) / _tmp1_;
	_tmp2_ = self->mark2;
	_tmp3_ = self->mark1;
	self->delta = _tmp2_ - _tmp3_;
	_tmp4_ = self->mark2;
	self->mark1 = _tmp4_;
	_tmp5_ = self->frames;
	self->frames = _tmp5_ + 1;
	_tmp6_ = self->elapsed;
	_tmp7_ = self->delta;
	self->elapsed = _tmp6_ + _tmp7_;
	_tmp8_ = self->elapsed;
	if (_tmp8_ > 1.0) {
		gint _tmp9_ = 0;
		gdouble _tmp10_ = 0.0;
		_tmp9_ = self->frames;
		_tmp10_ = self->elapsed;
		self->fps = (gdouble) ((gint) (((gdouble) _tmp9_) / _tmp10_));
		self->elapsed = 0.0;
		self->frames = 0;
	}
	game_processEvents (self);
	_tmp11_ = self->world;
	_tmp12_ = self->delta;
	entitas_world_execute ((entitasWorld*) _tmp11_, _tmp12_);
}


void game_draw (Game* self) {
	SDL_Renderer* _tmp0_ = NULL;
	SDL_Renderer* _tmp1_ = NULL;
	GList* _tmp2_ = NULL;
	SDL_Renderer* _tmp5_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->renderer;
	SDL_SetRenderDrawColor (_tmp0_, (guint8) 0, (guint8) 0, (guint8) 0xff, (guint8) 0);
	_tmp1_ = self->renderer;
	SDL_RenderClear (_tmp1_);
	_tmp2_ = self->sprites;
	{
		GList* sprite_collection = NULL;
		GList* sprite_it = NULL;
		sprite_collection = _tmp2_;
		for (sprite_it = sprite_collection; sprite_it != NULL; sprite_it = sprite_it->next) {
			entitasEntity* sprite = NULL;
			sprite = sprite_it->data;
			{
				gboolean _tmp3_ = FALSE;
				_tmp3_ = entitas_entity_isActive (sprite);
				if (_tmp3_) {
					entitasEntity* _tmp4_ = NULL;
					_tmp4_ = sprite;
					game_drawEach (self, _tmp4_);
				}
			}
		}
	}
	game_drawFps (self);
	_tmp5_ = self->renderer;
	SDL_RenderPresent (_tmp5_);
}


void game_drawFps (Game* self) {
	sdxSprite* _tmp0_ = NULL;
	SDL_Renderer* _tmp1_ = NULL;
	gdouble _tmp2_ = 0.0;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	sdxFont* _tmp5_ = NULL;
	SDL_Color _tmp6_ = {0};
	sdxSprite* _tmp7_ = NULL;
	sdxSprite* _tmp8_ = NULL;
	sdxSprite* _tmp9_ = NULL;
	SDL_Renderer* _tmp10_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->fpsSprite;
	if (_tmp0_ != NULL) {
		_sdx_sprite_release0 (self->fpsSprite);
		self->fpsSprite = NULL;
	}
	_tmp1_ = self->renderer;
	_tmp2_ = self->fps;
	_tmp3_ = g_strdup_printf ("%2.2f", _tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = self->font;
	_tmp6_.r = (guint8) 0xd7;
	_tmp6_.g = (guint8) 0xeb;
	_tmp6_.b = (guint8) 0xd7;
	_tmp6_.a = (guint8) 0xfa;
	_tmp7_ = sdx_sprite_new (_tmp1_, _tmp4_, _tmp5_, &_tmp6_);
	_sdx_sprite_release0 (self->fpsSprite);
	self->fpsSprite = _tmp7_;
	_g_free0 (_tmp4_);
	_tmp8_ = self->fpsSprite;
	_tmp8_->centered = FALSE;
	_tmp9_ = self->fpsSprite;
	_tmp10_ = self->renderer;
	sdx_sprite_render (_tmp9_, _tmp10_, 0, 0, NULL);
}


gboolean game_drawEach (Game* self, entitasEntity* e) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = entitas_entity_hasSprite (e);
	if (_tmp0_) {
		entitasEntity* _tmp1_ = NULL;
		entitasBounds* _tmp2_ = NULL;
		entitasEntity* _tmp3_ = NULL;
		entitasSprite* _tmp4_ = NULL;
		gint _tmp5_ = 0;
		entitasEntity* _tmp6_ = NULL;
		entitasScale* _tmp7_ = NULL;
		gdouble _tmp8_ = 0.0;
		entitasEntity* _tmp9_ = NULL;
		entitasBounds* _tmp10_ = NULL;
		entitasEntity* _tmp11_ = NULL;
		entitasSprite* _tmp12_ = NULL;
		gint _tmp13_ = 0;
		entitasEntity* _tmp14_ = NULL;
		entitasScale* _tmp15_ = NULL;
		gdouble _tmp16_ = 0.0;
		gboolean _tmp17_ = FALSE;
		SDL_Renderer* _tmp55_ = NULL;
		entitasEntity* _tmp56_ = NULL;
		entitasSprite* _tmp57_ = NULL;
		sdxSprite* _tmp58_ = NULL;
		SDL_Texture* _tmp59_ = NULL;
		entitasEntity* _tmp60_ = NULL;
		entitasBounds* _tmp61_ = NULL;
		gint _tmp62_ = 0;
		entitasEntity* _tmp63_ = NULL;
		entitasBounds* _tmp64_ = NULL;
		gint _tmp65_ = 0;
		entitasEntity* _tmp66_ = NULL;
		entitasBounds* _tmp67_ = NULL;
		gint _tmp68_ = 0;
		entitasEntity* _tmp69_ = NULL;
		entitasBounds* _tmp70_ = NULL;
		gint _tmp71_ = 0;
		SDL_Rect _tmp72_ = {0};
		_tmp1_ = e;
		_tmp2_ = (*_tmp1_).bounds;
		_tmp3_ = e;
		_tmp4_ = (*_tmp3_).sprite;
		_tmp5_ = (*_tmp4_).width;
		_tmp6_ = e;
		_tmp7_ = (*_tmp6_).scale;
		_tmp8_ = (*_tmp7_).x;
		(*_tmp2_).w = (gint) (((gdouble) _tmp5_) * _tmp8_);
		_tmp9_ = e;
		_tmp10_ = (*_tmp9_).bounds;
		_tmp11_ = e;
		_tmp12_ = (*_tmp11_).sprite;
		_tmp13_ = (*_tmp12_).height;
		_tmp14_ = e;
		_tmp15_ = (*_tmp14_).scale;
		_tmp16_ = (*_tmp15_).y;
		(*_tmp10_).h = (gint) (((gdouble) _tmp13_) * _tmp16_);
		_tmp17_ = entitas_entity_isBackground (e);
		if (!_tmp17_) {
			entitasEntity* _tmp18_ = NULL;
			entitasBounds* _tmp19_ = NULL;
			entitasEntity* _tmp20_ = NULL;
			entitasPosition* _tmp21_ = NULL;
			gdouble _tmp22_ = 0.0;
			entitasEntity* _tmp23_ = NULL;
			entitasBounds* _tmp24_ = NULL;
			gint _tmp25_ = 0;
			entitasEntity* _tmp26_ = NULL;
			entitasBounds* _tmp27_ = NULL;
			entitasEntity* _tmp28_ = NULL;
			entitasPosition* _tmp29_ = NULL;
			gdouble _tmp30_ = 0.0;
			entitasEntity* _tmp31_ = NULL;
			entitasBounds* _tmp32_ = NULL;
			gint _tmp33_ = 0;
			gboolean _tmp34_ = FALSE;
			_tmp18_ = e;
			_tmp19_ = (*_tmp18_).bounds;
			_tmp20_ = e;
			_tmp21_ = (*_tmp20_).position;
			_tmp22_ = (*_tmp21_).x;
			_tmp23_ = e;
			_tmp24_ = (*_tmp23_).bounds;
			_tmp25_ = (*_tmp24_).w;
			(*_tmp19_).x = (gint) (((gdouble) _tmp22_) - (_tmp25_ / 2));
			_tmp26_ = e;
			_tmp27_ = (*_tmp26_).bounds;
			_tmp28_ = e;
			_tmp29_ = (*_tmp28_).position;
			_tmp30_ = (*_tmp29_).y;
			_tmp31_ = e;
			_tmp32_ = (*_tmp31_).bounds;
			_tmp33_ = (*_tmp32_).h;
			(*_tmp27_).y = (gint) (((gdouble) _tmp30_) - (_tmp33_ / 2));
			_tmp34_ = entitas_entity_hasTint (e);
			if (_tmp34_) {
				entitasEntity* _tmp35_ = NULL;
				entitasSprite* _tmp36_ = NULL;
				sdxSprite* _tmp37_ = NULL;
				SDL_Texture* _tmp38_ = NULL;
				entitasEntity* _tmp39_ = NULL;
				entitasTint* _tmp40_ = NULL;
				gint _tmp41_ = 0;
				entitasEntity* _tmp42_ = NULL;
				entitasTint* _tmp43_ = NULL;
				gint _tmp44_ = 0;
				entitasEntity* _tmp45_ = NULL;
				entitasTint* _tmp46_ = NULL;
				gint _tmp47_ = 0;
				entitasEntity* _tmp48_ = NULL;
				entitasSprite* _tmp49_ = NULL;
				sdxSprite* _tmp50_ = NULL;
				SDL_Texture* _tmp51_ = NULL;
				entitasEntity* _tmp52_ = NULL;
				entitasTint* _tmp53_ = NULL;
				gint _tmp54_ = 0;
				_tmp35_ = e;
				_tmp36_ = (*_tmp35_).sprite;
				_tmp37_ = (*_tmp36_).sprite;
				_tmp38_ = _tmp37_->texture;
				_tmp39_ = e;
				_tmp40_ = (*_tmp39_).tint;
				_tmp41_ = (*_tmp40_).r;
				_tmp42_ = e;
				_tmp43_ = (*_tmp42_).tint;
				_tmp44_ = (*_tmp43_).g;
				_tmp45_ = e;
				_tmp46_ = (*_tmp45_).tint;
				_tmp47_ = (*_tmp46_).b;
				SDL_SetTextureColorMod (_tmp38_, (guint8) _tmp41_, (guint8) _tmp44_, (guint8) _tmp47_);
				_tmp48_ = e;
				_tmp49_ = (*_tmp48_).sprite;
				_tmp50_ = (*_tmp49_).sprite;
				_tmp51_ = _tmp50_->texture;
				_tmp52_ = e;
				_tmp53_ = (*_tmp52_).tint;
				_tmp54_ = (*_tmp53_).a;
				SDL_SetTextureAlphaMod (_tmp51_, (guint8) _tmp54_);
			}
		}
		_tmp55_ = self->renderer;
		_tmp56_ = e;
		_tmp57_ = (*_tmp56_).sprite;
		_tmp58_ = (*_tmp57_).sprite;
		_tmp59_ = _tmp58_->texture;
		_tmp60_ = e;
		_tmp61_ = (*_tmp60_).bounds;
		_tmp62_ = (*_tmp61_).x;
		_tmp63_ = e;
		_tmp64_ = (*_tmp63_).bounds;
		_tmp65_ = (*_tmp64_).y;
		_tmp66_ = e;
		_tmp67_ = (*_tmp66_).bounds;
		_tmp68_ = (*_tmp67_).w;
		_tmp69_ = e;
		_tmp70_ = (*_tmp69_).bounds;
		_tmp71_ = (*_tmp70_).h;
		_tmp72_.x = _tmp62_;
		_tmp72_.y = _tmp65_;
		_tmp72_.w = (guint) _tmp68_;
		_tmp72_.h = (guint) _tmp71_;
		SDL_RenderCopy (_tmp55_, _tmp59_, NULL, &_tmp72_);
	}
	result = TRUE;
	return result;
}


static void game_instance_init (Game * self) {
	guint64 _tmp0_ = 0ULL;
	self->refCount = 1;
	self->sprites = NULL;
	self->elapsed = (gdouble) 0;
	self->frames = 0;
	_tmp0_ = SDL_GetPerformanceFrequency ();
	self->freq = (gdouble) _tmp0_;
}


void game_free (Game* self) {
	 (self->evt);
	_entitas_world_release0 (self->world);
	_g_list_free0 (self->sprites);
	_sdx_font_release0 (self->font);
	_sdx_sprite_release0 (self->fpsSprite);
	_systems_collision_release0 (self->collision);
	_systems_expire_release0 (self->expire);
	_systems_input_release0 (self->input);
	_systems_physics_release0 (self->physics);
	_systems_remove_release0 (self->remove);
	_systems_spawn_release0 (self->spawn);
	_systems_animation_release0 (self->animate);
	g_slice_free (Game, self);
}


/**
 * add to game.sprites in layer order
 */
void entityAdded (entitasEntity* e) {
	gboolean _tmp0_ = FALSE;
	gint layer = 0;
	entitasEntity* _tmp1_ = NULL;
	entitasLayer* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	Game* _tmp4_ = NULL;
	GList* _tmp5_ = NULL;
	guint _tmp6_ = 0U;
	_tmp0_ = entitas_entity_hasSprite (e);
	if (!_tmp0_) {
		return;
	}
	_tmp1_ = e;
	_tmp2_ = (*_tmp1_).layer;
	_tmp3_ = (*_tmp2_).value;
	layer = _tmp3_;
	_tmp4_ = game_instance;
	_tmp5_ = _tmp4_->sprites;
	_tmp6_ = g_list_length (_tmp5_);
	if (_tmp6_ == ((guint) 0)) {
		Game* _tmp7_ = NULL;
		entitasEntity* _tmp8_ = NULL;
		_tmp7_ = game_instance;
		_tmp8_ = e;
		_tmp7_->sprites = g_list_append (_tmp7_->sprites, _tmp8_);
	} else {
		gint i = 0;
		Game* _tmp9_ = NULL;
		GList* _tmp10_ = NULL;
		Game* _tmp20_ = NULL;
		entitasEntity* _tmp21_ = NULL;
		i = 0;
		_tmp9_ = game_instance;
		_tmp10_ = _tmp9_->sprites;
		{
			GList* s_collection = NULL;
			GList* s_it = NULL;
			s_collection = _tmp10_;
			for (s_it = s_collection; s_it != NULL; s_it = s_it->next) {
				entitasEntity* s = NULL;
				s = s_it->data;
				{
					entitasEntity* _tmp11_ = NULL;
					gint _tmp12_ = 0;
					entitasEntity* _tmp13_ = NULL;
					entitasLayer* _tmp14_ = NULL;
					gint _tmp15_ = 0;
					_tmp11_ = s;
					_vala_assert (_tmp11_ != NULL, "s != null");
					_tmp12_ = layer;
					_tmp13_ = s;
					_tmp14_ = (*_tmp13_).layer;
					_tmp15_ = (*_tmp14_).value;
					if (_tmp12_ <= _tmp15_) {
						Game* _tmp16_ = NULL;
						entitasEntity* _tmp17_ = NULL;
						gint _tmp18_ = 0;
						_tmp16_ = game_instance;
						_tmp17_ = e;
						_tmp18_ = i;
						_tmp16_->sprites = g_list_insert (_tmp16_->sprites, _tmp17_, _tmp18_);
						return;
					} else {
						gint _tmp19_ = 0;
						_tmp19_ = i;
						i = _tmp19_ + 1;
					}
				}
			}
		}
		_tmp20_ = game_instance;
		_tmp21_ = e;
		_tmp20_->sprites = g_list_append (_tmp20_->sprites, _tmp21_);
	}
}


/**
* remove from game.sprites
*/
void entityRemoved (entitasEntity* e) {
	Game* _tmp0_ = NULL;
	entitasEntity* _tmp1_ = NULL;
	_tmp0_ = game_instance;
	_tmp1_ = e;
	_tmp0_->sprites = g_list_remove (_tmp0_->sprites, _tmp1_);
}



